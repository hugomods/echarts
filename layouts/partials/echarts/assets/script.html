{{- if .Store.Get "hasECharts" }}
  {{- $opts := dict
    "targetPath" "js/echarts.js"
    "minify" hugo.IsProduction
  }}
  {{- $js := resources.Get "mods/echarts/index.ts" | js.Build $opts }}
  {{- if hugo.IsProduction }}
    {{- $js = $js | fingerprint }}
  {{- end }}
  <script src="{{ $js.RelPermalink }}"></script>
{{- end }}
{{- with .Store.Get "eChartsJSVars" }}
  {{- $jsVars := resources.Get "mods/echarts/js-vars.js" }}
  {{- $jsVarsPath := printf "%s/echarts.vars.js" page.RelPermalink }}
  {{- $jsVars = $jsVars
    | resources.ExecuteAsTemplate $jsVarsPath .
    | js.Build (dict "targetPath" $jsVarsPath "minify" hugo.IsProduction)
  }}
  {{- if hugo.IsProduction }}
    {{- $jsVars = $jsVars | fingerprint }}
  {{- end }}
  <script src="{{ $jsVars.RelPermalink }}"></script>
{{- end }}
